{% extends postorius_base_template %}
{% load url from future %}
{% load i18n %}

{% block subtitle %}
{% trans "Info | " as page_title %}{{ page_title|add:list.fqdn_listname}}
{% endblock %}

{% load nav_helpers %}

{% block body_class %}list_summary{% endblock %}

{% block main %}
    {% if user.is_superuser or user.is_list_owner or user.is_list_moderator %}
        {% include 'postorius/menu/list_nav.html' %}
    {% endif %}
    <h1>{{list.display_name}}</h1>


    <h2>{% trans 'Description' %}</h2>
    <p>{{list.settings.description }}</p>

    {% if hyperkitty_url %}
    <h2>{% trans 'Archived messages' %}</h2>
    {% blocktrans %}
    To see the prior postings to this list, visit
    <a href="{{ hyperkitty_url }}">the archives</a>.
    {% endblocktrans %}
    {% endif %}

    <h2>{% trans 'Subscription' %}</h2>
    {% if user.is_authenticated %}
    {% if userSubscribed %}
    {% trans "You are subscribed to this list with your address:" %}
    <em>{{ subscribed_address }}</em>
    <br/>
    <h2>Change Subscription</h2>
    <form action="{% url 'change_subscription' list.list_id %}" method="POST" class="change_subscription">
      {% csrf_token %}
      {{change_subscription_form.as_p}}
      <input class="btn btn-success" type="submit" value="{% trans 'Change Subscription' %}">
    </form>
    <h2>Unsubscribe</h2>
    <a href="{% url 'list_unsubscribe' list.list_id subscribed_address %}" class="btn btn-danger">{% trans "Unsubscribe" %} {{ subscribed_address }}</a>
    {% else %}
    <form action="{% url 'list_subscribe' list.list_id %}" method="post" class="list_subscribe"> {% csrf_token %}
        {{ subscribe_form.as_p }}
        <input class="btn btn-success" type="submit" value="{% trans 'Subscribe' %}" />
    </form>
    {% endif %}
    {% else %}
        <p>{% trans "To subscribe to or unsubscribe from this list you have to be logged in." %}</p>
        <p><a href="{% url 'user_login' %}"class="btn btn-primary">{% trans "Log In" %}</a></p>
    {% endif %}
{% endblock %}
